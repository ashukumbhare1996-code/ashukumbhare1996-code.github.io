<!DOCTYPE html>
<html>
	<head>
		<meta charset='UTF-8'>
			<title>JSON To HTML using codebeautify.org</title>
		</head>
		<body>
			<table border=1>
				<thead>
					<tr>
						<th>name</th>
						<th>nodes.0.parameters.options.systemMessage</th>
						<th>nodes.0.type</th>
						<th>nodes.0.typeVersion</th>
						<th>nodes.0.position.0</th>
						<th>nodes.0.position.1</th>
						<th>nodes.0.maxIterations</th>
						<th>nodes.0.maxExecutionTime</th>
						<th>nodes.0.verbose</th>
						<th>nodes.0.id</th>
						<th>nodes.0.name</th>
						<th>nodes.1.parameters</th>
						<th>nodes.1.type</th>
						<th>nodes.1.typeVersion</th>
						<th>nodes.1.position.0</th>
						<th>nodes.1.position.1</th>
						<th>nodes.1.id</th>
						<th>nodes.1.name</th>
						<th>nodes.2.parameters.options</th>
						<th>nodes.2.type</th>
						<th>nodes.2.typeVersion</th>
						<th>nodes.2.position.0</th>
						<th>nodes.2.position.1</th>
						<th>nodes.2.id</th>
						<th>nodes.2.name</th>
						<th>nodes.2.credentials.serpApi.id</th>
						<th>nodes.2.credentials.serpApi.name</th>
						<th>nodes.3.parameters.jsCode</th>
						<th>nodes.3.id</th>
						<th>nodes.3.name</th>
						<th>nodes.3.type</th>
						<th>nodes.3.typeVersion</th>
						<th>nodes.3.position.0</th>
						<th>nodes.3.position.1</th>
						<th>nodes.4.parameters.httpMethod</th>
						<th>nodes.4.parameters.path</th>
						<th>nodes.4.parameters.responseMode</th>
						<th>nodes.4.parameters.options</th>
						<th>nodes.4.type</th>
						<th>nodes.4.typeVersion</th>
						<th>nodes.4.position.0</th>
						<th>nodes.4.position.1</th>
						<th>nodes.4.id</th>
						<th>nodes.4.name</th>
						<th>nodes.4.webhookId</th>
						<th>nodes.5.parameters.jsCode</th>
						<th>nodes.5.id</th>
						<th>nodes.5.name</th>
						<th>nodes.5.type</th>
						<th>nodes.5.typeVersion</th>
						<th>nodes.5.position.0</th>
						<th>nodes.5.position.1</th>
						<th>nodes.6.parameters.respondWith</th>
						<th>nodes.6.parameters.responseBody</th>
						<th>nodes.6.parameters.options</th>
						<th>nodes.6.id</th>
						<th>nodes.6.name</th>
						<th>nodes.6.type</th>
						<th>nodes.6.typeVersion</th>
						<th>nodes.6.position.0</th>
						<th>nodes.6.position.1</th>
						<th>nodes.7.parameters.options</th>
						<th>nodes.7.type</th>
						<th>nodes.7.typeVersion</th>
						<th>nodes.7.position.0</th>
						<th>nodes.7.position.1</th>
						<th>nodes.7.id</th>
						<th>nodes.7.name</th>
						<th>nodes.7.credentials.googlePalmApi.id</th>
						<th>nodes.7.credentials.googlePalmApi.name</th>
						<th>nodes.8.parameters.operation</th>
						<th>nodes.8.parameters.calendar.__rl</th>
						<th>nodes.8.parameters.calendar.value</th>
						<th>nodes.8.parameters.calendar.mode</th>
						<th>nodes.8.parameters.calendar.cachedResultName</th>
						<th>nodes.8.parameters.limit</th>
						<th>nodes.8.parameters.timeMin</th>
						<th>nodes.8.parameters.timeMax</th>
						<th>nodes.8.parameters.options</th>
						<th>nodes.8.type</th>
						<th>nodes.8.typeVersion</th>
						<th>nodes.8.position.0</th>
						<th>nodes.8.position.1</th>
						<th>nodes.8.id</th>
						<th>nodes.8.name</th>
						<th>nodes.8.credentials.googleCalendarOAuth2Api.id</th>
						<th>nodes.8.credentials.googleCalendarOAuth2Api.name</th>
						<th>nodes.9.parameters.calendar.__rl</th>
						<th>nodes.9.parameters.calendar.value</th>
						<th>nodes.9.parameters.calendar.mode</th>
						<th>nodes.9.parameters.calendar.cachedResultName</th>
						<th>nodes.9.parameters.start</th>
						<th>nodes.9.parameters.end</th>
						<th>nodes.9.parameters.useDefaultReminders</th>
						<th>nodes.9.parameters.additionalFields.summary</th>
						<th>nodes.9.type</th>
						<th>nodes.9.typeVersion</th>
						<th>nodes.9.position.0</th>
						<th>nodes.9.position.1</th>
						<th>nodes.9.id</th>
						<th>nodes.9.name</th>
						<th>nodes.9.credentials.googleCalendarOAuth2Api.id</th>
						<th>nodes.9.credentials.googleCalendarOAuth2Api.name</th>
						<th>nodes.10.parameters.operation</th>
						<th>nodes.10.parameters.calendar.__rl</th>
						<th>nodes.10.parameters.calendar.value</th>
						<th>nodes.10.parameters.calendar.mode</th>
						<th>nodes.10.parameters.calendar.cachedResultName</th>
						<th>nodes.10.parameters.eventId</th>
						<th>nodes.10.parameters.options</th>
						<th>nodes.10.type</th>
						<th>nodes.10.typeVersion</th>
						<th>nodes.10.position.0</th>
						<th>nodes.10.position.1</th>
						<th>nodes.10.id</th>
						<th>nodes.10.name</th>
						<th>nodes.10.credentials.googleCalendarOAuth2Api.id</th>
						<th>nodes.10.credentials.googleCalendarOAuth2Api.name</th>
						<th>pinData</th>
						<th>connections.Simple Memory.ai_memory.0.0.node</th>
						<th>connections.Simple Memory.ai_memory.0.0.type</th>
						<th>connections.Simple Memory.ai_memory.0.0.index</th>
						<th>connections.SerpAPI.ai_tool.0.0.node</th>
						<th>connections.SerpAPI.ai_tool.0.0.type</th>
						<th>connections.SerpAPI.ai_tool.0.0.index</th>
						<th>connections.Prepare Chat Data.main.0.0.node</th>
						<th>connections.Prepare Chat Data.main.0.0.type</th>
						<th>connections.Prepare Chat Data.main.0.0.index</th>
						<th>connections.Format Response.main.0.0.node</th>
						<th>connections.Format Response.main.0.0.type</th>
						<th>connections.Format Response.main.0.0.index</th>
						<th>connections.AI Agent.main.0.0.node</th>
						<th>connections.AI Agent.main.0.0.type</th>
						<th>connections.AI Agent.main.0.0.index</th>
						<th>connections.Google Gemini Chat Model.ai_languageModel.0.0.node</th>
						<th>connections.Google Gemini Chat Model.ai_languageModel.0.0.type</th>
						<th>connections.Google Gemini Chat Model.ai_languageModel.0.0.index</th>
						<th>connections.Webhook.main.0.0.node</th>
						<th>connections.Webhook.main.0.0.type</th>
						<th>connections.Webhook.main.0.0.index</th>
						<th>connections.Get events.ai_tool.0.0.node</th>
						<th>connections.Get events.ai_tool.0.0.type</th>
						<th>connections.Get events.ai_tool.0.0.index</th>
						<th>connections.Create an event.ai_tool.0.0.node</th>
						<th>connections.Create an event.ai_tool.0.0.type</th>
						<th>connections.Create an event.ai_tool.0.0.index</th>
						<th>connections.Delete an event.ai_tool.0.0.node</th>
						<th>connections.Delete an event.ai_tool.0.0.type</th>
						<th>connections.Delete an event.ai_tool.0.0.index</th>
						<th>active</th>
						<th>settings.executionOrder</th>
						<th>versionId</th>
						<th>meta.instanceId</th>
						<th>id</th>
						<th>tags</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>3Chat_Cal_Webhook</td>
						<td>=You are a smart and considerate personal AI assistant. Please respond to messages based on the information you receive, keeping the following points in mind:
-Please ensure that all subsequent messages are responded to in English
-You can query my schedule/appointments.
-Use the serpAPI tool for web searches when necessary.
-The current time is: {{ $now }}
-Remove the phrase 'Hello! According to the retrieved information') from the response.
-If I ask you to handle any schedule functions, use the Google Calendar Tool.
-If I ask you to add or update an event but do not provide an end time, the default duration for the event should be set to 1 hour.
-If I ask you to modify an event, first use the Google Calendar Tool to retrieve the event's original information before making the modification.
</td>
						<td>@n8n/n8n-nodes-langchain.agent</td>
						<td>2.2</td>
						<td>400</td>
						<td>0</td>
						<td>15</td>
						<td>120</td>
						<td>true</td>
						<td>0fec6a5c-bd06-4fc8-8e47-494cef356d82</td>
						<td>AI Agent</td>
						<td></td>
						<td>@n8n/n8n-nodes-langchain.memoryBufferWindow</td>
						<td>1.3</td>
						<td>416</td>
						<td>240</td>
						<td>9adc54e8-41fc-466d-8d13-468ea57da6f4</td>
						<td>Simple Memory</td>
						<td></td>
						<td>@n8n/n8n-nodes-langchain.toolSerpApi</td>
						<td>1</td>
						<td>608</td>
						<td>240</td>
						<td>63f18ec1-a001-462e-8e8a-227035adc5bf</td>
						<td>SerpAPI</td>
						<td>aEsKtrDDC1Tblqs1</td>
						<td>SerpAPI account</td>
						<td>const webhookData = $('Webhook').first().json;

// create session ID 
let sessionId = webhookData.body.sessionId;
if (!sessionId) {
  sessionId = 'web_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
}

return {
  chatInput: webhookData.body.message || webhookData.body.text || '',
  sessionId: sessionId,
  userId: sessionId, // use sessionId as userId
  timestamp: webhookData.body.timestamp || new Date().toISOString(),
  clientInfo: {
    userAgent: webhookData.headers['user-agent'] || '',
    ip: webhookData.headers['x-forwarded-for'] || webhookData.headers['x-real-ip'] || ''
  }
};</td>
						<td>ed89df14-f504-4bf3-bdc6-6aa796debded</td>
						<td>Prepare Chat Data</td>
						<td>n8n-nodes-base.code</td>
						<td>2</td>
						<td>208</td>
						<td>0</td>
						<td>POST</td>
						<td>chat_webhook</td>
						<td>responseNode</td>
						<td></td>
						<td>n8n-nodes-base.webhook</td>
						<td>2</td>
						<td>0</td>
						<td>0</td>
						<td>8de21508-a83d-4f0a-8b61-e4384ab11b8d</td>
						<td>Webhook</td>
						<td>9557b7f9-5011-4617-889c-6829691e4873</td>
						<td>// Process AI response
const agentResponse = $('AI Agent').first().json; // Use "AI Agent" as the node name
const prepareData = $('Prepare Chat Data').first().json;

// Try different possible response formats
let responseText = agentResponse.text || 
                  agentResponse.output || 
                  agentResponse.response ||
                  agentResponse.content ||
                  'I’m sorry, please try again later.';

// Keep line breaks and normalize format
let safeText = responseText;
// let safeText = responseText.trim();
// Remove unnecessary prefixes (e.g., system-generated greetings)
safeText = safeText.replace(/^Hello! Based on the retrieved information[.,:]?\s*/i, '');

// Remove https URLs (per system requirements)
// safeText = safeText.replace(/https?:\/\/[^\s]+/g, '[URL removed]');

// Provide a default reply if the response is empty
if (!safeText || safeText.trim() === '') {
  safeText = 'Sorry, I’m unable to fully understand your question at the moment. Please try rephrasing it, and I’ll do my best to assist you!';
}

return {
  success: true,
  message: safeText,
  sessionId: prepareData.sessionId,
  timestamp: new Date().toISOString()
};
</td>
						<td>e826085a-eb35-4f3d-9060-d4951bfc3fe9</td>
						<td>Format Response</td>
						<td>n8n-nodes-base.code</td>
						<td>2</td>
						<td>704</td>
						<td>0</td>
						<td>json</td>
						<td>={{ $json }}</td>
						<td></td>
						<td>97fbbf35-1d1b-4b45-bf97-cb86250947f5</td>
						<td>Respond to Webhook</td>
						<td>n8n-nodes-base.respondToWebhook</td>
						<td>1</td>
						<td>896</td>
						<td>0</td>
						<td></td>
						<td>@n8n/n8n-nodes-langchain.lmChatGoogleGemini</td>
						<td>1</td>
						<td>224</td>
						<td>240</td>
						<td>7792bbb9-9f6c-4cd5-b10a-1e6402a083dc</td>
						<td>Google Gemini Chat Model</td>
						<td>P0wWqmbiOLA94Lry</td>
						<td>Google Gemini Api luarnpinPaid</td>
						<td>getAll</td>
						<td>true</td>
						<td>luarn@gapps.ntust.edu.tw</td>
						<td>list</td>
						<td>luarn@gapps.ntust.edu.tw</td>
						<td>={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Limit', ``, 'number') }}</td>
						<td>={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('After', ``, 'string') }}</td>
						<td>={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Before', ``, 'string') }}</td>
						<td></td>
						<td>n8n-nodes-base.googleCalendarTool</td>
						<td>1.3</td>
						<td>832</td>
						<td>240</td>
						<td>b46a5141-dff2-43b3-8320-a439478948dc</td>
						<td>Get events</td>
						<td>JPTiNLecCGmCNNWK</td>
						<td>Calendar gapps</td>
						<td>true</td>
						<td>luarn@gapps.ntust.edu.tw</td>
						<td>list</td>
						<td>luarn@gapps.ntust.edu.tw</td>
						<td>={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Start', ``, 'string') }}</td>
						<td>={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('End', ``, 'string') }}</td>
						<td>={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Use_Default_Reminders', ``, 'boolean') }}</td>
						<td>={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Summary', ``, 'string') }}</td>
						<td>n8n-nodes-base.googleCalendarTool</td>
						<td>1.3</td>
						<td>960</td>
						<td>240</td>
						<td>5077684b-875a-4195-8305-7ae8055a7191</td>
						<td>Create an event</td>
						<td>JPTiNLecCGmCNNWK</td>
						<td>Calendar gapps</td>
						<td>delete</td>
						<td>true</td>
						<td>luarn@gapps.ntust.edu.tw</td>
						<td>list</td>
						<td>luarn@gapps.ntust.edu.tw</td>
						<td>={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Event_ID', ``, 'string') }}</td>
						<td></td>
						<td>n8n-nodes-base.googleCalendarTool</td>
						<td>1.3</td>
						<td>1088</td>
						<td>240</td>
						<td>2c3264bd-98c2-4922-98b8-8ff696573000</td>
						<td>Delete an event</td>
						<td>JPTiNLecCGmCNNWK</td>
						<td>Calendar gapps</td>
						<td></td>
						<td>AI Agent</td>
						<td>ai_memory</td>
						<td>0</td>
						<td>AI Agent</td>
						<td>ai_tool</td>
						<td>0</td>
						<td>AI Agent</td>
						<td>main</td>
						<td>0</td>
						<td>Respond to Webhook</td>
						<td>main</td>
						<td>0</td>
						<td>Format Response</td>
						<td>main</td>
						<td>0</td>
						<td>AI Agent</td>
						<td>ai_languageModel</td>
						<td>0</td>
						<td>Prepare Chat Data</td>
						<td>main</td>
						<td>0</td>
						<td>AI Agent</td>
						<td>ai_tool</td>
						<td>0</td>
						<td>AI Agent</td>
						<td>ai_tool</td>
						<td>0</td>
						<td>AI Agent</td>
						<td>ai_tool</td>
						<td>0</td>
						<td>true</td>
						<td>v1</td>
						<td>c324c303-b7b8-453f-b4f3-cce2b9e00faa</td>
						<td>9f99c0b38d61fd40b3986982e7369bc021df64168a734c9319139faf1a12f037</td>
						<td>wlq4mHJJU6rPtZaO</td>
						<td></td>
					</tr>
					<tr>
						<td></td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
						<td>&nbsp</td>
					</tr>
				</tbody>
			</table>
		</body>
	</html>